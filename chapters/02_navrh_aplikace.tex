\chapter{Návrh aplikace}

Tato kapitola se zabývá návrhem mobilní aplikace na základě výsledků provedené analýzy.
Cílem návrhu je definovat funkční rozsah aplikace, její strukturu, uživatelské rozhraní a technologické řešení tak, aby odpovídaly potřebám cílových uživatelů a zvolenému zaměření aplikace.
K tomuto byly využity standardní techniky softwarového inženýrství, zejména
specifikace požadavků a návrhové diagramy.

Nejprve jsou specifikovány funkční a nefunkční požadavky, které vymezují chování a vlastnosti aplikace.
Na jejich základě je dále vytvořen diagram případů užití znázorňující základní interakce mezi uživateli a aplikací.
Struktura aplikace je následně popsána pomocí diagramu tříd, který zachycuje hlavní entity a jejich vzájemné vztahy.
Součástí kapitoly je také návrh uživatelského rozhraní, jenž se zaměřuje na rozvržení obrazovek a způsob interakce s~uživatelem.
Závěrečná část kapitoly se věnuje výběru technologií, které budou vyhovovat požadavkům aplikace a umožní její efektivní implementaci.


\section{Specifikace požadavků}

Tato kapitola se zabývá specifikací požadavků na navrhovanou aplikaci.
Požadavky vymezují očekávané chování systému a jeho vlastnosti z pohledu uživatelů i provozu aplikace.

\subsection{Funkční požadavky}

Funkční požadavky popisují chování aplikace a funkce, které aplikace poskytuje svým uživatelům.
Aplikace rozlišuje dva základní typy uživatelů – běžné návštěvníky aplikace a registrované uživatele.

\begin{itemize}
    \item Uživatel může zobrazit obchody v~mapovém nebo seznamovém zobrazení.
    \item Uživatel může filtrovat zobrazené obchody podle kategorie, vzdálenosti a průměrného hodnocení.
    \item Uživatel může zobrazit detail obchodu, včetně popisu, fotografií a kontaktních údajů.
    \item Uživatel může vytvořit uživatelský účet.
    \item Registrovaný uživatel může vytvářet nové obchody.
    \item Registrovaný uživatel může upravovat a spravovat obchody, které vytvořil.
    \item Registrovaný uživatel může upravovat své kontaktní údaje zobrazované u~jeho obchodů.
    \item Registrovaný uživatel může ke svým obchodům přidávat název, popis, kategorie nabízených produktů, fotografie, nabídku produktů a otevírací dobu.
    \item Registrovaný uživatel může vytvářet recenze obchodů ostatních uživatelů.
\end{itemize}

Aplikace neslouží jako e-shop a neumožňuje přímý nákup nebo objednávky.
Jejím cílem je poskytnout prostředek pro prezentaci nabídky domácích producentů na mapě a umožnit zájemcům snadno vyhledat obchody v~jejich okolí.

\subsection{Nefunkční požadavky}

Nefunkční požadavky popisují vlastnosti aplikace, které se netýkají přímo funkcionality, ale ovlivňují kvalitu, použitelnost a provoz aplikace.

\begin{itemize}
    \item Aplikace je určena pro platformu Android.
    \item Uživatelské rozhraní aplikace musí být přehledné a snadno použitelné i~pro méně technicky zdatné uživatele.
    \item Aplikace musí umožňovat plynulé zobrazení mapy a obchodů bez výrazných prodlev.
    \item Data uložená v~aplikaci musí být přístupná pouze oprávněným uživatelům.
    \item Aplikace musí být navržena tak, aby bylo možné ji dále rozšiřovat o~další funkce.
\end{itemize}


\section{Diagram případů užití}
% TODO: Spis by se hodilo cesky Diagranm pripadu uziti. podobne nasledujici kapitola Diagram trid - jedna se o zazite ceske terminy. - DONE
Diagram případů (anglicky Use Case Diagram) užití slouží k~přehlednému znázornění základních funkcí aplikace a interakcí mezi uživateli a systémem.
Diagram vychází ze specifikace funkčních požadavků a zachycuje chování aplikace z~pohledu jednotlivých typů uživatelů.
Přehled aktérů a případů užití aplikace je znázorněn na obrázku~\ref{fig:use-case-diagram}.

V~rámci aplikace jsou rozlišeny tři základní role: obecného uživatele (User), zákazníka (Customer) a prodejce (Seller).
Obecný uživatel představuje nadřazenou roli, ze které vycházejí specializované role zákazníka a prodejce.
Tyto specializované role jsou rozděleny podle toho, jakým způsobem chce uživatel aplikaci využívat.

Obecný uživatel zahrnuje možnosti registrace, přihlášení a odhlášení z~aplikace, které jsou přístupné všem uživatelům bez ohledu na jejich způsob využití aplikace.
Umožňuje také úpravu osobních údajů.
Tato možnost je přístupná jakémukoli přihlášenému uživateli.

Zákazník může procházet obchody v~mapovém nebo seznamovém zobrazení, zobrazovat detail obchodu a filtrovat obchody podle kategorií, vzdálenosti nebo hodnocení.
Tyto filtry jsou v~diagramu modelovány jako rozšiřující případy užití nad základními způsoby procházení obchodů.
Pokud je běžný uživatel přihlášen, může vytvářet recenze obchodů ostatních uživatelů.

Třetím aktérem je prodejce, který může vytvářet, upravovat a odstraňovat své obchody.
V rámci správy obchodu může prodejce upravovat polohu obchodu na mapě, otevírací dobu, nabídku produktů a kategorie nabízených produktů.
Všechny interakce prodejce vyžadují přihlášení.

\begin{figure}[h] % [p] pro full page, [h] pro here
    \centering
    \includegraphics[width=\textwidth]{res/use_case_diagram}
    \caption{Diagram případů užití aplikace}
    \label{fig:use-case-diagram}
\end{figure}
\FloatBarrier


\section{Diagram tříd}

Diagram tříd (anglicky Class Diagram) popisuje strukturu aplikace z~pohledu hlavních entit, jejich atributů a vztahů mezi nimi.
Diagram vychází ze specifikace funkčních požadavků a diagramu případů užití a slouží jako podklad pro návrh datového modelu a implementaci aplikační logiky.
Modeluje základní entity tak, aby systém mohl plnit požadované funkce, zajišťoval konzistenci dat a umožňoval jejich efektivní správu do budoucna.
Přehled hlavních tříd a jejich vztahů je znázorněn na obrázku~\ref{fig:class-diagram}.

\begin{figure}[p]
    \centering
    \includegraphics[width=\textwidth]{res/class_diagram}
    \caption{Diagram tříd aplikace}
    \label{fig:class-diagram}
\end{figure}

\subsection{Entita uživatele}
Jednou ze základních entit je uživatel (User), který reprezentuje registrovaného uživatele aplikace.
Uživatel je identifikován jednoznačným identifikátorem a obsahuje základní osobní údaje, profilový obrázek a kontaktní informace.
Identifikátor je typu UUID, což zajišťuje jeho jedinečnost napříč celým systémem.
Kontaktní údaje jsou modelovány samostatnou třídou \texttt{ContactInfo}, která je s uživatelem svázána kompozicí, jelikož bez existence uživatele nemají samostatný význam.
Profilový obrázek je volitelný a je reprezentován hodnotovým objektem \texttt{ImageResource}, který uchovává odkaz na externě uložený obrazový soubor.

\subsection{Entita obchodu}
Druhou klíčovou entitou je obchod (Shop), který reprezentuje obchod vytvořený registrovaným uživatelem, kde může nabízet své produkty.
Obchod je také identifikován jednoznačným identifikátorem typu UUID\@.
Obchod obsahuje atributy: id, název, popis, vlastník, seznam kategorií, obrázky, nabídku produktů, polohu a otevírací dobu. % TODO: zvýraznit výčet?
Základní atributy jako název a popis jsou oba typu \texttt{String} a jsou volitelné.

Obchod je svázán s uživatelem prostřednictvím asociace, která vyjadřuje vlastnictví obchodu konkrétním uživatelem.

Kategorie obchodu je reprezentována hodnotovým objektem \texttt{ShopCategory}, který obsahuje název kategorie a barvu pro vizuální odlišení.
Vztah mezi obchodem a kategoriemi je modelován jako kompozice, protože kategorie jsou vlastněny konkrétním obchodem.
Zakladatel obchodu si tak může zvolit libovolnou kombinaci názvu a barvy pro každou kategorii.
Požadované filtrování obchodů podle kategorií bude realizováno pomocí normalizovaných názvů kategorií ze všech obchodů.

Obrázky obchodu jsou reprezentovány jako seznam již zmiňovaných hodnotových objektů \texttt{ImageResource}.

Nabídka produktů je modelována hodnotovým objektem \texttt{Menu}, který obsahuje seznam položek nabídky typu \texttt{MenuItem}.
Každá položka nabídky obsahuje název, volitelný popis, cenu a informaci o dostupnosti.
Cena je reprezentována hodnotovým objektem \texttt{PriceLabel}, který uchovává cenu jako formátovaný řetězec.
Uživatel tak může cenu popsat vzhledem k měně a jednotce v jaké se produkt nabízí (například \enquote{150 Kč / kg}).

Otevírací doba obchodu je reprezentována rozhraním \texttt{OpeningHours}, které má dvě implementace: \texttt{TimeOpeningHours} a \texttt{MessageOpeningHours}.
První implementace uchovává otevírací dobu jako mapu dnů v týdnu na otevírací hodiny v případě, že producent je dostupný v pravidelných časech.
Druhá implementace uchovává otevírací dobu jako volitelnou zprávu v~případě, že producent chce například uvést, aby ho zájemce nejdříve kontaktoval.

Poloha obchodu je modelována hodnotovým objektem \texttt{Location}, který obsahuje zeměpisnou šířku a délku jako desetinná čísla.

\subsection{Entita recenze}
Poslední entitou je recenze (Review), která reprezentuje hodnocení obchodu uživatelem.
Recenze je identifikována jednoznačným identifikátorem typu UUID a obsahuje atributy: id, autor, obchod, hodnocení a volitelný komentář.
Recenze je svázána s uživatelem prostřednictvím asociace, která vyjadřuje autora recenze.
S obchodem je recenze rovněž svázána asociací, jelikož recenze reprezentuje interakci mezi uživatelem a konkrétním obchodem, nikoli jeho vnitřní součást.
Přestože recenze bez existence obchodu ztrácí svůj praktický význam, není modelována jako kompozitní součást obchodu, protože má vlastní identitu a samostatný životní cyklus.


\section{Návrh uživatelského rozhraní}
% TODO: Jak a na kolika ruznych lidech planujete testovat kvalitu UI?

Návrh uživatelského rozhraní (UI) se zaměřuje na vytvoření přehledného a intuitivního prostředí pro uživatele aplikace.
Cílem je zajistit, aby uživatelé mohli snadno a efektivně využívat funkce aplikace a dosahovat svých cílů, které vychází z funkčních požadavků a diagramu případů užití.
Návrh UI zahrnuje rozvržení obrazovek, navigační strukturu a interakční prvky.
Při návrhu rozhraní je kladen důraz na konzistenci ovládacích prvků, díky čemuž se uživatel snadno zorientuje v aplikaci, jasnou navigaci aplikací a minimalizaci počtu kroků potřebných k~provedení akcí.

\subsection{Barevné schéma}
% TODO: Co je to material design? Odkaz do literatury! - DONE
% TODO: #Material theme builder je v praci navrzen nebo prevzat. V 1. pripade je vhodne odkazat odpovidajici cat text ve durhem zdroj, odkud cerpate. - DONE

Aplikace využívá principy Material Designu, které zajišťují jednotný a moderní vzhled aplikace.
Material Design je designový systém vyvinutý společností Google, který poskytuje sadu doporučených postupů a komponent pro tvorbu uživatelských rozhraní.\footfullcite{material_design}

Barevná paleta byla vygenerována pomocí nástroje Material Theme Builder, který generuje barevné schéma v souladu s principy Material Designu.\footfullcite{material_theme_builder}
Po zadání primární barvy do nástroje nám vytvoří kompletní sadu barev pro světlé i tmavé téma aplikace.
V případě potřeby lze barvy dále upravovat, avšak pro základní návrh zajišťují tyto vygenerované barvy konzistentní a esteticky příjemný vzhled aplikace.
Pro primární barvu byla zvolena tmavě zelená (\#3C6838), která evokuje přírodní potraviny a zemědělství.
Ostatní barvy byly nástrojem Material Theme Builder vygenerovány na základě této primární barvy, aby se vzájemně doplňovaly.
Zajišťují tak dostatečný kontrast pro čitelnost textu a vizuální přitažlivost aplikace.

Významnou barvou v Material Design paletě je barva \textit{surface}, která je používána jako pozadí pro většinu obrazovek aplikace (v obrázku~\ref{fig:color-palette} je použita jako pozadí boxu \enquote{Světlý motiv}, respektive \enquote{Tmavý motiv}).
Těmi nejdůležitějšími barvami jsou ale barvy primární, sekundární, terciární a jejich kontejnerové varianty (zobrazeny na~obrázku~\ref{fig:color-palette}).
Primární, sekundární a terciární barvy jsou používány pro zvýraznění důležitých prvků uživatelského rozhraní, jako jsou tlačítka, ikony a další interakční prvky.
Kontejnerové varianty těchto barev jsou používány pro větší plochy, které jsou třeba zvýraznit, jako jsou karty nebo větší tlačítka.\footfullcite{material3_color_roles}

\begin{figure}[h]
    \centering
    \includegraphics[width=\textwidth]{res/color_palette}
    \caption{Barevná paleta aplikace}
    \label{fig:color-palette}
\end{figure}

\subsection{Rozvržení obrazovek}
Návrh rozvržení obrazovek aplikace vychází z funkčních požadavků a diagramu případů užití.
Je důležité, aby uživatelské rozhraní bylo přehledné a intuitivní, což umožní uživatelům snadno najít a využít požadované funkce aplikace.

\subsubsection{Navigační lišta}
Ve spodní části základních obrazovek se nachází navigační lišta (obrázky~\ref{fig:ui-overview}), která obsahuje tři ikony představující tři hlavní obrazovky aplikace: \enquote{Moje obchody}, \enquote{Úvodní obrazovka} a \enquote{Profil uživatele}.
Díky ní může uživatel snadno navigovat mezi právě těmito základními obrazovkami aplikace.
První ikona v liště slouží pro navigaci na obrazovku se seznamem obchodů vytvořených uživatelem.
Tato ikona se v navigační liště zobrazuje pouze pokud je uživatel přihlášen.
Druhá ikona slouží pro navigaci na úvodní obrazovku s mapovým a seznamovým zobrazením obchodů.
Třetí ikona slouží pro navigaci na obrazovku profilu uživatele.
V případě, že je uživatel přihlášen, je na této obrazovce možné upravit osobní údaje.
V opačném případě se zobrazí přihlašovací obrazovka, kde se může uživatel přihlásit nebo zaregistrovat nový účet.

\subsubsection{Úvodní obrazovka}
Úvodní obrazovkou aplikace je obrazovka, kde uživatel může zvolit mezi mapovým a seznamovým zobrazením obchodů.

Výchozím zobrazením je mapové zobrazení, kde mapa ukazuje polohu uživatele a okolní obchody jako značky na mapě (obrázek~\ref{fig:map-view}).
Při kliknutí na značku obchodu se zobrazí detail obchodu jako spodní panel, který obsahuje detaily obchodu (obrázek~\ref{fig:map-view-shop-detail}).

V seznamovém zobrazení jsou obchody zobrazeny jako karty v~seznamu, které obsahují pouze základní informace o obchodu, aby byly karty přehledné, ale zároveň obchod dostatečně popisovaly (obrázek~\ref{fig:list-view}).
Zde se při kliknutí na kartu obchodu zobrazí detail obchodu na samostatné obrazovce (obrázek~\ref{fig:shop-detail}).

Obě zobrazení mají společnou spodní nabídku, kde může uživatel přepínat mezi mapovým a seznamovým zobrazením a otevřít dialog pro filtry.
Při kliknutí na tlačítko filtrů se zobrazí dialog, kde může uživatel zvolit jaký filtr chce upravit (kategorie, vzdálenost, hodnocení) a následně nastavit jeho hodnoty (obrázek~\ref{fig:filters}).
V záložce \enquote{Filtry kategorií} může uživatel přidat název kategorie, které chce zobrazit.
Názvy jsou doporučovány na základě jejich četnosti v existujících obchodech, aby uživatel mohl snadno vybrat nejčastější kategorie a podle již zadaných počátečních písmen.
V záložce \enquote{Filtr vzdálenosti} může uživatel zvolit maximální vzdálenost obchodů od své aktuální polohy pomocí posuvníku a v záložce \enquote{Filtr hodnocení} může uživatel zvolit minimální průměrné hodnocení obchodů pomocí hvězdiček.

\begin{figure}[htbp]
    \centering

    \begin{subfigure}[t]{0.24\textwidth}
        \centering
        \includegraphics[width=\linewidth]{res/ui/map_view}
        \caption{Mapové zobrazení obchodů}
        \label{fig:map-view}
    \end{subfigure}\hfill
    \begin{subfigure}[t]{0.24\textwidth}
        \centering
        \includegraphics[width=\linewidth]{res/ui/list_view}
        \caption{Seznamové zobrazení obchodů}
        \label{fig:list-view}
    \end{subfigure}\hfill
    \begin{subfigure}[t]{0.24\textwidth}
        \centering
        \includegraphics[width=\linewidth]{res/ui/map_view_shop_detail}
        \caption{Detail obchodu v mapovém zobrazení}
        \label{fig:map-view-shop-detail}
    \end{subfigure}\hfill
    \begin{subfigure}[t]{0.24\textwidth}
        \centering
        \includegraphics[width=\linewidth]{res/ui/shop_detail}
        \caption{Detail obchodu v plném zobrazení}
        \label{fig:shop-detail}
    \end{subfigure}

    \caption{Přehled uživatelského rozhraní aplikace}
    \label{fig:ui-overview}
\end{figure}

\begin{figure}
    \centering
    \includegraphics[width=\linewidth]{res/ui/filters}
    \caption{Dialog pro nastavení filtrů}
    \label{fig:filters}
\end{figure}

\subsubsection{Obrazovka profilu uživatele}
Na obrazovce profilu může uživatel upravit své osobní údaje, jak bylo specifikováno ve funkčních požadavcích.
Mezi tyto údaji patří jméno, kontaktní informace a profilový obrázek.
V případě profilového obrázku může uživatel buď nahrát obrázek ze svého zařízení, nebo přímo vyfotit nový obrázek pomocí fotoaparátu zařízení.
Uživatel se zde také může odhlásit z aplikace.

\subsubsection{Obrazovka Moje obchody}
Na obrazovce \enquote{Moje obchody} má uživatel přehled o všech obchodech, které vytvořil.
Obchody jsou zobrazeny jako karty v seznamu, podobně jako v seznamovém zobrazení na úvodní obrazovce.
Každá karta má však navíc tlačítka pro úpravu a odstranění obchodu.
Po kliknutí na tlačítko pro úpravu se spustí proces úpravy obchodu a po kliknutí na tlačítko pro odstranění se daný obchod smaže.
K tomu se ve spodní části obrazovky nachází tlačítko pro vytvoření nového obchodu.
Po kliknutí na toto tlačítko se spustí proces vytváření nového obchodu.

\subsubsection{Proces vytváření a úpravy obchodu}
Proces vytváření a úpravy obchodu je rozdělen do několika kroků a každý krok je zobrazen na samostatné obrazovce.
Uživatel může mezi těmito kroky libovolně navigovat pomocí dvou spodních tlačítek \enquote{Předchozí} a \enquote{Další}.

V prvním kroku uživatel zadává název a polohu obchodu na mapě (obrázek~\ref{fig:create-shop-step-01}).
Jsou to kromě samotné nabídky nejvýznamnější údaje, které obchod popisují a kterých si zájemci všimnou jako první.

V druhém kroku uživatel přidává fotografie a popis obchodu (obrázek~\ref{fig:create-shop-step-02}).
Pro fotografie má uživatel na výběr mezi přidáním ze svého zařízení nebo vyfocením nové fotografie pomocí fotoaparátu zařízení.
Fotografie může uživatel přidávat, mazat nebo měnit jejich pořadí.
Pro popis obchodu je k dispozici textové pole, kde uživatel může zadat libovolný dlouhý text.

Ve třetím kroku uživatel přidává kategorie produktů obchodu a položky nabídky (obrázek~\ref{fig:create-shop-step-03}).
Kategorie produktů jsou reprezentovány názvem a barvou, kterou si uživatel může zvolit z předdefinované palety barev (obrázek~\ref{fig:create-shop-add-edit-category}).
Názvy kategorií se uživatelovi doporučují na základě jejich četnosti v existujících obchodech, aby uživatel mohl snadno vybrat nejpopulárnější kategorie a jeho obchod byl tak lépe dohledatelný.
Položky nabídky produktů (Menu produktů) obsahují název, volitelný popis, cenu a informaci o dostupnosti (obrázek~\ref{fig:create-shop-add-edit-product}).
Po kliknutí na tlačítko \enquote{Přidat produkt} se zobrazí dialog pro zadání těchto údajů o nové položce nabídky.
Každá položka nabídky je zobrazena jako karta v seznamu a kromě zobrazení údajů obsahuje také tlačítka pro úpravu a odstranění položky nabídky.

Ve čtvrtém kroku uživatel zadává otevírací dobu obchodu (obrázek~\ref{fig:create-shop-step-04}).
Uživatel má na výběr mezi dvěma způsoby zadání otevírací doby: jako pravidelnou denní otevírací dobu (obrázek~\ref{fig:create-shop-opening-hours-time}), kde může uživatel ke každému dni v týdnu zadat zprávu, kde popíše otevírací hodiny (například \enquote{9:00-11:00, 13:00-17:00}), nebo jako volitelnou zprávu, kde uživatel může zadat libovolný text (například \enquote{Kontaktujte mě předem telefonicky}).

Posledním krokem je shrnutí, kde může uživatel zkontrolovat všechny zadané údaje před vytvořením nebo úpravou obchodu.
Tato obrazovka je téměř totožná jako obrazovka detailu obchodu, ale obsahuje navíc tlačítka \enquote{Předchozí} a \enquote{Potvrdit} (místo tlačítka \enquote{Další} jako v předchozích krocích).

\begin{figure}[htbp]

    \centering
    \begin{subfigure}[t]{0.24\textwidth}
        \centering
        \includegraphics[width=\linewidth]{res/ui/create_flow/create_shop_01}
        \caption{Krok 1: Název a poloha obchodu}
        \label{fig:create-shop-step-01}
    \end{subfigure}\hfill
    \begin{subfigure}[t]{0.24\textwidth}
        \centering
        \includegraphics[width=\linewidth]{res/ui/create_flow/create_shop_02}
        \caption{Krok 2: Obrázky a popis obchodu}
        \label{fig:create-shop-step-02}
    \end{subfigure}\hfill
    \begin{subfigure}[t]{0.24\textwidth}
        \centering
        \includegraphics[width=\linewidth]{res/ui/create_flow/create_shop_03}
        \caption{Krok 3: Kategorie produktů obchodu a nabídka produktů}
        \label{fig:create-shop-step-03}
    \end{subfigure}\hfill
    \begin{subfigure}[t]{0.24\textwidth}
        \centering
        \includegraphics[width=\linewidth]{res/ui/create_flow/create_shop_04}
        \caption{Krok 4: Otevírací doba obchodu – zpráva}
        \label{fig:create-shop-step-04}
    \end{subfigure}

    \caption{Kroky vytváření a úpravy obchodu}
    \label{fig:create-shop-steps}
\end{figure}

\begin{figure}[htbp]
    \centering
    \begin{subfigure}[t]{0.24\textwidth}
        \centering
        \includegraphics[width=\linewidth]{res/ui/create_flow/opening_hours_time}
        \caption{Denní otevírací doba obchodu}
        \label{fig:create-shop-opening-hours-time}
    \end{subfigure}
    \hspace{0.02\textwidth}
    \begin{subfigure}[t]{0.24\textwidth}
        \centering
        \includegraphics[width=\linewidth]{res/ui/create_flow/add/edit_category}
        \caption{Přidání / úprava kategorie obchodu}
        \label{fig:create-shop-add-edit-category}
    \end{subfigure}
    \hspace{0.02\textwidth}
    \begin{subfigure}[t]{0.24\textwidth}
        \centering
        \includegraphics[width=\linewidth]{res/ui/create_flow/add/edit_product}
        \caption{Přidání / úprava položky nabídky obchodu}
        \label{fig:create-shop-add-edit-product}
    \end{subfigure}

    \caption{Dodatečné prvky vytváření a úpravy obchodu}
    \label{fig:create-shop-additional}
\end{figure}


\section{Výběr technologií}
% Compose (vs Java/xml), Material 3, Firebase (vs Server Backend, vs Spring Server a proč jsem si to nevybral), Dokumentová databáze (vs SQL), BaaS, Serverless backend??

Volba použitých technologií vychází z požadavků aplikace a zohledňuje faktory jako je efektivita vývoje, uživatelský zážitek, škálovatelnost a údržba aplikace.
Cílem je zvolit technologie vhodné pro vytvoření funkční, spolehlivé a uživatelsky přívětivé aplikace, která bude odpovídat potřebám cílových uživatelů a splňovat stanovené požadavky.

\subsection{Volba cílové platformy}
% 3 hlavní možnosti: mobilní aplikace, webová aplikace, desktopová aplikace
% Proč mobilní aplikace?
% Důvody volby platformy
%  - fotky - foťák/galerie (stejně telefon potřebuješ) jednodušší na telefonu
%  - aktuální poloha uživatele - jednodušší na telefonu
%  - mapa okolí uživatele - možnost použití mimo domov, při cestování/návratu domů z cesty - primární využití telefonu
%  - kontaktování producenta většinou přes telefon - jednodušší, protože by uživatel stejně použil telefon
% A z těchto důvodů volím vývoj jako platformu mobilní aplikaci, aby byla její použitelnost a uživatelský zážitek co nejlepší.
% Webová aplikace by sice zajistila větší dostupnost, ale primární využití je na mobilním telefonu, kde by webová aplikace ve srovnání s nativní mobilní aplikací poskytovala výrazně horší uživatelský zážitek.
% Soustředit se na mobilní aplikaci je tak nejoptimálnější řešení tohoto problému.

% Android je nejrozšířenější mobilní platforma v česku, proto ji volím jako cílovou platformu pro vývoj aplikace.

% TODO: iOS - zmínit/nezmínit -  nemám prostředky pro vývoj, testování ani vydání aplikace na této platformě
% TODO: Zmínit/nezmínit - Jetpack compose - možnost předělat na multiplatform

Při volbě platformy pro vývoj aplikace se obvykle nabízejí tři hlavní možnosti: mobilní aplikace, webová aplikace a desktopová aplikace.
Navrhovaná aplikace využívá funkce, jako jsou fotoaparát zařízení, galerie obrázků, zjišťování aktuální polohy uživatele a mapové zobrazení okolí.
Aplikace je navržena tak, aby byla využitelná i mimo domov, například při cestování nebo návratu z cesty, kdy uživatel potřebuje rychle vyhledat obchody v~okolí své aktuální polohy.
Zároveň obchody v aplikaci poskytují zájemcům kontaktní údaje na producenty, aby je mohli snadno kontaktovat například formou telefonního hovoru, SMS nebo odkazem na sociální sítě.
V praxi k této interakci uživatelé ve většině případů využívají mobilní telefon, takže i zde je vhodnější mít aplikaci přímo na mobilním zařízení.
Z uvedených důvodů je nejvhodnější aplikační platformou mobilní aplikace.
Webová aplikace by sice zajistila vyšší míru dostupnosti napříč zařízeními, avšak v prostředí mobilních zařízení by ve srovnání s nativní mobilní aplikací poskytovala výrazně horší uživatelský zážitek, jak z hlediska výkonu, odezvy a použitelnosti, tak i z hlediska přístupu k nativním funkcím zařízení.
V České republice je nejrozšířenějším operačním systémem pro mobilní zařízení Android, a proto byla jako cílová platforma zvolena mobilní aplikace pro platformu Android.

Alternativou k nativnímu vývoji by bylo využití multiplatformních frameworků, jako jsou Flutter nebo React Native, které umožňují cílit na více platforem z jednoho kódu.
Tato řešení však přinášejí další vrstvu abstrakce a zvyšují složitost integrace s nativními funkcemi zařízení, jako jsou práce s mapami, polohou uživatele nebo fotoaparátem.
Vzhledem k zaměření práce výhradně na platformu Android, rozsahu bakalářské práce a důrazu na návrh uživatelského rozhraní a aplikační logiky bylo zvoleno nativní řešení v jazyce Kotlin s frameworkem Jetpack Compose.

\subsection{Programovací jazyk a UI framework}

Pro vývoj mobilní aplikace pro platformu Android bylo nutné zvolit vhodný programovací jazyk a framework pro tvorbu uživatelského rozhraní.
V současnosti patří mezi nejčastěji používané kombinace pro vývoj nativních Android aplikací Java s XML, Kotlin s XML a Kotlin s frameworkem Jetpack Compose.

Jako programovací jazyk byl zvolen Kotlin, který je moderním a oficiálně doporučovaným jazykem pro vývoj Android aplikací.
Ve srovnání s jazykem Java nabízí Kotlin kratší a čitelnější syntaxi, lepší podporu moderních programovacích paradigmat a vyšší bezpečnost typů díky práci s nulovatelností (null-safety).

Pro tvorbu uživatelského rozhraní byl zvolen framework Jetpack Compose, který umožňuje deklarativní přístup k návrhu UI\@.
Tento přístup snižuje množství potřebného kódu, usnadňuje jeho údržbu a zrychluje vývoj aplikace.
Jetpack Compose je navíc přirozeně integrován se správou stavu aplikace, což usnadňuje práci s dynamickým obsahem a uživatelskými interakcemi.

Zvolená kombinace jazyka Kotlin a frameworku Jetpack Compose představuje moderní a v současnosti doporučovaný způsob vývoje nativních aplikací pro platformu Android.

\subsection{Designový systém}
% Design system
% Možnosti pro mobilní aplikaci
%  - Material Design 2 - starší, ale stále používaný
%  - Material Design 3 - nejmodernější, prozkoumaný vliv na UX a uživatele
%  - vlastní design - náročné na čas a vývoj, horší UX, odpovídá značce produktu a společnosti
% Material Design 2 vs 3 - statistika, testováno na uživatelích (někde jsou aji studie nebo něco takovýho)
% Důvody volby Material Design 3
% - moderní vzhled a dojem
% - doporučený Googlem pro Android aplikace
% - lepší podpora pro tmavý režim
% - vestavěné komponenty a vzory pro lepší UX

Designový systém aplikace ovlivňuje vzhled, dojem z aplikace a snadnost jejího používání.
Pro mobilní aplikaci pro platformu Android se v praxi využívají většinou tři hlavní možnosti: Material Design 2, Material Design 3 a vlastní designový systém.

Vlastní designový systém by zahrnoval vytvoření veškerých vlastních komponent, barevného schématu a vzorů pro uživatelské rozhraní.
Tento přístup je velmi časově náročný a vyžaduje značné usilí při návrhu i při implementaci.
Použití vlastního designového systému je vhodné řešení především pro velké společnosti, které chtějí, aby jejich aplikace přesně odpovídala značce produktu či společnosti a svých stylem se velmi blízce podobala jejich dalším produktům.

Nejpoužívanější možností pro Android aplikace je využití Material Designu, což je designový systém vyvinutý společností Google.
V praxi se využívají verze Material Design 2 a Material Design 3.
% TODO: dopsat

\subsection{Backendové řešení a architektura}
% Porovnání Firebase vs Backend server (Spring) - proč se backend server nevyplatí s mém případě

% Důvody volby Firebase
% - Integrace s Androidem a Kotlinem
% - snadný a rychlý vývoj backendu
% - Nejčastěji používaný pro podobné aplikace
% - Nejčastěji používaný startupy a menšími týmy
% - Nízké či nulové náklady na provoz při menším počtu uživatelů
% - Netřeba řešit škálovatelnost a provoz serveru
% - Náklady na provoz serveru

% Zvolené řešení umožňuje soustředit se na návrh aplikace a uživatelského rozhraní, nikoli na provozní aspekty backendu.

% TODO: zmínit/nezmínit - při správném návrhu backendu lze později přejít na vlastní serverové řešení, pokud by to bylo potřeba

% Backend as a Service a serverless architektura
% NoSQL databáze
% Autentizace uživatelů - Firebase Authentication
% Ukládání souborů - Firebase Storage

Součástí návrhu aplikace bylo rozhodnutí o vhodném backendovém řešení, které by odpovídalo rozsahu bakalářské práce, požadavkům aplikace a možnostem jednotlivce jako vývojáře.
Pro realizaci backendové části aplikace bylo zvoleno řešení Firebase, které představuje plnohodnotné backendové řešení \textit{Backend-as-a-Service} (BaaS).

Firebase nabízí širokou škálu služeb, které dobře zapadají do potřeb navrhované aplikace.
Mezi klíčové služby patří Firestore databáze pro ukládání dat, Firebase Autentizace pro správu uživatelských účtů, Firebase Storage pro ukládání souborů, jako jsou fotografie obchodů a profilové obrázky uživatelů a Firebase Crashlytics pro sledování chyb a výkonu aplikace.
Výhodou použití Firebase je jeho snadná integrace s platformou Android a jazykem Kotlin, protože Firebase poskytuje oficiální SDK a knihovny pro tyto technologie.\footfullcite{firebase_android_kotlin}
Alternativním řešením by bylo vytvoření vlastního backendového serveru například pomocí frameworku Spring.
Tento přístup by však vyžadoval značné množství času a úsilí.
Kromě více implementační práce by bylo nutné řešit i provozní aspekty, jako je nasazení, škálovatelnost, bezpečnost a údržba serveru nebo i náklady na jeho provoz.
Cílem této bakalářské práce je však zaměřit se na návrh aplikace a uživatelského rozhraní, vývoj aplikace a její nasazení.
Zvolená architektura Firebase jako BaaS umožňuje soustředit se na vývoj aplikace, aniž by bylo nutné řešit především provozní aspekty.
Zároveň je to řešení, které je velmi často využíváno startupy a menšími týmy pro rychlý vývoj aplikací s nízkými či nulovými náklady na provoz.
Při BaaS řešení se náklady na provoz odvíjejí podle počtu uživatelů a využití služeb, což je výhodné pro aplikace s menším počtem uživatelů.

\subsubsection{Backend as a Service a serverless architektura}
Zvolené řešení Firebase představuje plnohodnotné backendové řešení typu Backend-as-a-Service (BaaS).
% TODO: BaaS je...
BaaS je model cloudové služby, který poskytuje vývojářům předpřipravené backendové služby, jako jsou databáze, autentizace uživatelů, ukládání souborů a další funkce.\footfullcite{baas_definition}
Tento model umožňuje vývojářům soustředit se na vývoj aplikace, aniž by museli řešit provozní aspekty backendu, jako je nasazení, škálovatelnost a údržba serveru.
% TODO: serverless architektura

\subsubsection{Databázové řešení}
% NoSQL databáze Firestore
% NoSQL vs SQL databáze
% Výhody/nevýhody

Firebase poskytuje jako databázové řešení NoSQL databázi Firestore.
NoSQL databáze jsou vhodné pro aplikace s hierarchickými daty.
Aplikace která je postavena především na nižším počtu hlavních entit (obchod) s několika podřízenými entitami (kategorie produktů, položky nabídky, recenze, \ldots), či hodnotovými objekty (poloha, seznam fotografií, \ldots) je ideálním kandidátem pro NoSQL databázi.

\subsection{Mapové služby}
% Možnosti pro mapové služby
% - Google Maps - nejpoužívanější, dobrá dokumentace, snadná integrace s Androidem, ale placené nad určitou hranici použití
% - Mapbox - alternativa k Google Maps, dobrá dokumentace, snadná integrace s Androidem,
% - OpenStreetMap - open source, zdarma, ale horší dokumentace a složitější integrace s Androidem
% Důvody volby Google Maps
% - nejpoužívanější mapová služba
% - dobrá dokumentace a podpora
% - snadná integrace s Androidem
% - pokročilé funkce a možnosti přizpůsobení
% - minimální či nulové náklady při menším počtu uživatelů